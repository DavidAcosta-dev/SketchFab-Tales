<%- include('./partials/header.ejs') %>

<% let hiddenClass = '' %>
<% userId === story.author.id? hiddenClass = '': hiddenClass ='hidden' %>  


<form class="<%= hiddenClass %>" action="/stories/<%= story.id %>?_method=DELETE" method="POST">
    <input type="submit" value="DELETE">
</form>

<button class="<%= hiddenClass %>" type="button"><a href="/stories/<%= story.id %>/edit">EDIT</a></button>


<div class="flipbook-viewport">
	<div class="container">
        <div class="flipbook" id="flipbook">

        <div class="page hard">
          <div class="bookTitleContainer">
            <h1 class="authorH1Cover"><%= story.title %></h1> 
            <p class="authorCoverP">By <a href="/stories/user/<%= story.author.id %>"><%= story.author.firstName %></a></p>
          </div>
            
        </div>

          <div class="page hard">
            <iframe autoplay width="640" height="360" src="https://sketchfab.com/models/<%= story.image %>/embed?autostart=1&autospin=0.1" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" onmousewheel=""></iframe>
            
        </div>

        

        <div class="page">
            <p class="storyTextP"><%= story.storyText %></p>
        </div>

        <div class="page">
            <p><%= story.storyText %></p>
        </div>

        

        <div class="page hard"><img src="https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/06.jpg" draggable="false" alt="" /></div>

        <div class="page hard">
        </div>

        </div>
      </div>
    </div>
  
<script>
    let flipbookEL = document.getElementById('flipbook');
    console.log("LINKED")
    
    // window.addEventListener('resize', function (e) {
    //     flipbookEL.style.width = '';
    //   flipbookEL.style.height = '';
    //   $(flipbookEL).turn('size', flipbookEL.clientWidth, flipbookEL.clientHeight);
    // });
    
    $(flipbookEL).turn({
      width:922,
			
			// Height

			height:600,

			// Elevation

			elevation: 50,
			
			// Enable gradients

			gradients: true,
			
			// Auto center this flipbook

			autoCenter: true
    });
    
</script>


</body>
</html>  